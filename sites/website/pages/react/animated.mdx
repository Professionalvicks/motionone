import { AuthDocTemplate } from "../../components/AuthDocTemplate"
import styled from "styled-components"
export default AuthDocTemplate

export const meta = {
  title: "React: animated",
  description: "Create an animated React component.",
  needsSponsorship: true,
  shareImage: "social/share-react-animated.png",
}

Create an animated HTML element.

```jsx
import { animated } from "motion/react"

export function Component() {
  return (
    <animated.div
      style={{ scale: 1 }}
      hover={{ scale: 1.2 }}
      press={{ scale: 0.95 }}
      options={{ duration: 0.8, easing: [0.11, 1.75, 0.7, 0.79] }}
    />
  )
}
```

## Keyframes

### Single keyframe

Whenever a value in `style` changes, the element will animate to that value.

```jsx
<animated.div style={{ height: isOpen ? 200 : 0 }} />
```

### Multiple keyframes

By defining a value as an array, it'll animate through each keyframe in turn:

```jsx
<animated.div
  style={{ transform: ["none", "translateX(100px)", "scale(2)"] }}
/>
```

### Mount animations

Animations can be triggered on mount by providing an `initial` prop. Any values also in `style` will be animated when the component is first rendered:

```jsx
<animated.div initial={{ opacity: 0 }} style={{ opacity: 1 }} />
```

### Custom keyframe timing

By default, each keyframe will be spaced evenly throughout the animation. It's also possible to specify a list of `offset`s, values between `0` and `1`, that defines a relative point in the animation a specific keyframe should be hit:

```jsx
<animated.div
  style={{ transform: ["none", "translateX(100px)", "scale(2)"] }}
  options={{
    offsets: [0, 0.8, 1],
  }}
/>
```

If there are fewer keyframes than offsets defined in `offset`, the other keyframes will be spaced evenly:

```jsx
<animated.div
  style={{ color: ["red", "yellow", "green", "blue"] }}
  options={{
    offset: [0, 0.2], // [...0.6, 1]
  }}
/>
```

### Custom keyframe easing

It's also possible to define easing between specific keyframes by defining an [easing](#easing) option as any array:

```jsx
<animated.div
  style={{ color: ["red", "yellow", "green", "blue"] }}
  options={{
    easing: ["ease-in", "linear", "ease-out"],
  }}
/>
```

## Options

Options can be provided to the `options` prop. They can be defined either for all values:

```jsx
<animated.div
  style={{ color: ["red", "yellow", "green", "blue"] }}
  options={{ duration: 2 }}
/>
```

Or overridden for individual values:

```jsx
<animated.div
  style={{ opacity: 0, color: ["red", "yellow", "green", "blue"] }}
  options={{
    duration: 2,
    ease: "linear",
    opacity: { duration: 0.4 },
  }}
/>
```

### `duration`

**Default:** `0.3`

A duration, in seconds, that the animation will be delayed before starting.

```jsx
<animated.div style={{ backgroundColor: "red" }} options={{ duration: 2 }} />
```

### `delay`

**Default:** `0`

A duration, in seconds, that the animation will be delayed before starting.

```jsx
<animated.div style={{ backgroundColor: "red" }} options={{ delay: 0.5 }} />
```

### `endDelay`

**Default:** `0`

A duration, in seconds, that the animation will wait at the end before repeating or ending.

```jsx
<animated.div
  style={{ backgroundColor: "red" }}
  options={{ endDelay: 0.5, repeat: 2 }}
/>
```

### `easing`

**Default:** `"ease"`

An easing function to use, or list of easing functions to use for individual keyframes.

- Basic function names: `"linear"`, `"ease"`, `"ease-in"`, `"ease-out"`, `"ease-in-out"`
- [Cubic bezier curve](https://cubic-bezier.com/): e.g. `[.17,.67,.83,.67]`
- Stepped easing: e.g. `"steps(2, start)"`

```jsx
<animated.div
  initial={{ transform: "none" }}
  style={{ transform: "rotate(90deg)" }}
  options={{ easing: "steps(2, start)" }}
/>
```

### `direction`

**Default:** `"normal"`

The direction of animation playback. `"normal"`, `"reverse"`, `"alternate"`, or `"alternate-reverse"`.

```jsx
<animated.div
  initial={{ transform: "none" }}
  style={{ transform: "rotate(90deg)" }}
  options={{ direction: "reverse" }}
/>
```

### `repeat`

**Default:** `0`

The number of times the animation should repeat. Set to `Infinity` to repeat indefinitely.

```jsx
<animated.div
  initial={{ transform: "none" }}
  style={{ transform: "rotate(360deg)" }}
  options={{ repeat: Infinity }}
/>
```

## Props

### `options`

An object of animation options as described above.

```jsx
<animated.div style={{ opacity: 1 }} options={{ duration: 0.4 }} />
```

### `initial`

An object of styles to animate from when the component first renders.

```jsx
<animated.div initial={{ opacity: 0 }} style={{ opacity: 1 }} />
```

### `hover`

An object of styles to animate to while a hover gesture is active.

```jsx
<animated.div
  style={{ transform: "none" }}
  hover={{ transform: "scale(1.2)" }}
/>
```

### `press`

An object of styles to animate to while a press gesture is active.

```jsx
<animated.div
  style={{ transform: "none" }}
  hover={{ transform: "scale(1.2)" }}
  press={{ transform: "scale(0.9)" }}
/>
```

### `inViewport`

An object of styles to animate to while the element is within the viewport.

```jsx
<animated.div
  style={{ transform: "none" }}
  inViewport={{ transform: "scale(1.2)" }}
/>
```

### `viewport`

An object of options for when `inViewport` should be triggered.

#### `root`

A React ref containing an `Element` which, if defined, it will use as the "viewport" instead of the window.

```jsx
function Component() {
  const parentRef = useRef(null)

  return (
    <div ref={parentRef} style={{ overflow: "scroll" }}>
      <animated.div
        style={{ opacity: 0 }}
        inViewport={{ opacity: 1 }}
        viewport={{ root: parentRef }}
      />
    </div>
  )
}
```

#### `threshold`

**Default:** `0`

The amount of the element, measured as a number between `0` and `1`, that should be on-screen before the `inViewport` animation triggers.

```jsx
<animated.div
  style={{ opacity: 0 }}
  inViewport={{ opacity: 1 }}
  viewport={{ threshold: 0.5 }}
/>
```

#### `margin`

**Default:** `0`

A margin to add around the `root`'s bounding box when calculating whether the element is considered on-screen. Can be a percentage, or a negative number.

A different margin can be given for each side, e.g `"100px 0 -50px 0"`, starting with the top and proceeding clockwise.

```jsx
<animated.div
  style={{ opacity: 0 }}
  inViewport={{ opacity: 1 }}
  viewport={{ margin: "100px" }}
/>
```

#### `once`

**Default:** `false`

Set to `true` to only trigger an animation the first time the element enters the viewport.

```jsx
<animated.div
  style={{ opacity: 0 }}
  inViewport={{ opacity: 1 }}
  viewport={{ once: true }}
/>
```

### `onStart`

A callback that fires whenever an animation starts.

```jsx
<animated.div
  initial={{ transform: "none" }}
  style={{ transform: "rotate(360deg)" }}
  onStart={(definition) => console.log("Started", definition)}
/>
```

### `onComplete`

A callback that fires whenever an animation successfully completes.

```jsx
<animated.div
  initial={{ transform: "none" }}
  style={{ transform: "rotate(360deg)" }}
  onComplete={(definition) => console.log("Completed", definition)}
/>
```

### `onViewportEnter`

A callback that fires when an element enters the viewport. Is provided an [`IntersectionObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry) containing information about the triggering intersection event.

**Note:** To prevent this callback from firing every render, it should be memoised with `useCallback`.

```jsx
const onEnter = useCallback((entry) => {
  console.log("entered the viewport")
}, [])

return <animated.div onViewportEnter={onEnter} />
```

### `onViewportLeave`

A callback that fires when an element leaves the viewport. Is provided an [`IntersectionObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry) containing information about the triggering intersection event.

**Note:** To prevent this callback from firing every render, it should be memoised with `useCallback`.

```jsx
const onLeave = useCallback((entry) => {
  console.log("left the viewport")
}, [])

return <animated.div onViewportLeave={onEnter} />
```
