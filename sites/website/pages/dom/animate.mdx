import { AuthDocTemplate } from "../../components/AuthDocTemplate"
import styled from "styled-components"
export default AuthDocTemplate

export const meta = {
  title: "animate",
  description: "Animate an element to a target.",
  needsSponsorship: false,
  shareImage: "social/share-animate.png",
}

Animate an element or multiple elements to a specific target.

```javascript
import { animate } from "motion"

animate(selector, keyframes, options)
```

## Keyframes

### Single keyframe

By passing a single keyframe, the element will animate from its current style to those defined in the keyframe:

```javascript
animate(element, {
  opacity: 1,
  transform: "rotate(360deg)",
})
```

### Multiple keyframes

By defining a value as an array, it'll animate through each keyframe in turn:

```javascript
animate(element, {
  transform: ["rotate(90deg)", "translateX(100px) rotate(45deg)", "none"],
})
```

### Wildcards

`null` is a special wildcard. As the first keyframe, it'll be replaced by the current value as read from the DOM.

```javascript
element.style.opacity = "0.5"

animate(element, {
  opacity: [
    null, // 0.5
    0.8,
    1,
  ],
})
```

Subsequent `null` values will be replaced by the previous keyframe. Useful for keeping a style static for some of the animation. This way, you only have to change it in one place if you want to tweak the animation.

```javascript
animate(element, {
  x: [
    0,
    100,
    null, // 100
    200,
  ],
})
```

### Custom keyframe timing

By default, each of these keyframes will be spaced evenly throughout the animation. It's also possible to specify a list of `offset`s, values between `0` and `1`, that defines a relative point in the animation a specific keyframe should be hit:

```javascript
animate(
  element,
  {
    transform: ["rotate(90deg)", "translateX(100px) rotate(45deg)", "none"],
  },
  { offset: [0, 0.25, 1] }
)
```

If there are fewer keyframes than offsets defined in `offset`, the other keyframes will be spaced evenly:

```javascript
animate(
  element,
  { color: ["red", "yellow", "green", "blue"] },
  { offset: [0, 0.2] } // [...0.6, 1]
)
```

### Custom keyframe easing

It's also possible to define easing between specific keyframes by defining an [easing](#easing) option as any array:

```javascript
animate(
  element,
  { color: ["red", "yellow", "green", "blue"] },
  { easing: ["ease-in", "linear", "ease-out"] }
)
```

<!--
TODO: Accepted values / single transforms
-->

## Options

Options can be defined either for all values:

```javascript
animate(
  element,
  { opacity: 0, color: ["red", "yellow", "green", "blue"] },
  { duration: 2 }
)
```

Or overridden for individual values:

```javascript
animate(
  element,
  { opacity: 0, color: ["red", "yellow", "green", "blue"] },
  {
    duration: 2,
    ease: "linear",
    opacity: { duration: 0.4 },
  }
)
```

### `duration`

**Default:** `0.3`

A duration, in seconds, that the animation will take to complete.

```javascript
animate(element, { backgroundColor: "red" }, { duration: 2 })
```

### `delay`

**Default:** `0`

A duration, in seconds, that the animation will be delayed before starting.

```javascript
animate(element, { backgroundColor: "red" }, { delay: 0.5 })
```

When animating multiple elements, the [`stagger` function](/dom/stagger) can be used to offset the delay by increasing amounts across each element:

```javascript
import { animate, stagger } from "motion";

animate(element, { backgroundColor: "red" }, { delay: stagger(0.1) });
```

### `endDelay`

**Default:** `0`

A duration, in seconds, that the animation will wait at the end before ending.

```javascript
animate(element, { backgroundColor: "red" }, { endDelay: 0.5, repeat: 2 })
```

### `easing`

**Default:** `"ease"`

An easing function to use, or list of easing functions to use for individual keyframes.

- Basic function names: `"linear"`, `"ease"`, `"ease-in"`, `"ease-out"`, `"ease-in-out"`
- [Cubic bezier curve](https://cubic-bezier.com/): e.g. `[.17,.67,.83,.67]`
- Stepped easing: e.g. `"steps(2, start)"`

```javascript
animate(element, { transform: "rotate(90deg)" }, { easing: "steps(2, start)" })
```

### `direction`

**Default:** `"normal"`

The direction of animation playback. `"normal"`, `"reverse"`, `"alternate"`, or `"alternate-reverse"`.

```javascript
animate(element, { transform: "rotate(90deg)" }, { direction: "reverse" })
```

### `repeat`

**Default:** `0`

The number of times the animation should repeat. Set to `Infinity` to repeat indefinitely.

```javascript
animate(element, { transform: "rotate(90deg)" }, { repeat: Infinity })
```

### `stagger`

**Default:** `0`

A duration, in seconds, to stagger the animation of each provided element.

**Note:** This option cannot currently be overridden per value.

```javascript
animate(".boxes", { opacity: 1 }, { stagger: 0.2 })
```

### `allowWebkitAcceleration`

**Default:** `false`

Because of numerous timing bugs in Webkit's accelerated animations, these are disabled by default in Webkit-powered browsers.

However, if the your animation is being disrupted by heavy processing, you can allow acceleration with this setting. It's advised you test these animations thoroughly in both Safari and iOS Chrome.

<!-- Add note linking to perf guide explaining when Webkit itself disables acceleration -->

```javascript
animate(element, { transform: "scale(2)" }, { allowWebkitAcceleration: true })
```

If and when Webkit's implementation improves, this option will default to `true`.

## Returns

`animate` returns [animation controls](/dom/controls)
